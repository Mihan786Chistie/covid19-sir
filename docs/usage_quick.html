

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Usage: scenario analysis &mdash; CovsirPhy  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage: datasets" href="usage_dataset.html" />
    <link rel="prev" title="Usage: quickest tour" href="usage_quickest.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CovsirPhy
          

          
          </a>

          
            
            
              <div class="version">
                2.19.1-mu-fu1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">CovsirPhy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/INSTALLATION.html#dataset-preparation">Dataset preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_quickest.html">Usage: quickest tour</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage: scenario analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Preparation">Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Dataset-preparation">Dataset preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Start-scenario-analysis">Start scenario analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Display/save-figures">Display/save figures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Backup/restore-scenario">Backup/restore scenario</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Check-records">Check records</a></li>
<li class="toctree-l2"><a class="reference internal" href="#S-R-trend-analysis">S-R trend analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Parameter-estimation-of-ODE-models">Parameter estimation of ODE models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Evaluation-of-estimation-accuracy">Evaluation of estimation accuracy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Get-parameter-value">Get parameter value</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Show-parameter-history">Show parameter history</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Show-the-history-of-reproduction-number">Show the history of reproduction number</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Simulate-the-number-of-cases">Simulate the number of cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Main-scenario">Main scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Medicine-scenario">Medicine scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Short-term-prediction-of-parameter-values">Short-term prediction of parameter values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Compare-the-scenarios">Compare the scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Change-rate-of-parameters-in-main-scenario">Change rate of parameters in main scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Retrospective-analysis">Retrospective analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage_dataset.html">Usage: datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_phases.html">Usage: phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_theoretical.html">Usage: SIR-derived models</a></li>
<li class="toctree-l1"><a class="reference internal" href="covsirphy.html">covsirphy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="markdown/TERM.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security policy of CovsirPhy</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Guideline of contribution</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CovsirPhy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Usage: scenario analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usage_quick.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Usage:-scenario-analysis">
<h1>Usage: scenario analysis<a class="headerlink" href="#Usage:-scenario-analysis" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://colab.research.google.com/github/lisphilar/covid19-sir/blob/master/example/usage_quick.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<p>This is a quick tour of CovsirPhy. Details scenario analysis will be explained. “Scenario analysis” means that we calculate the number of cases in the future phases with some sets of ODE parameter values. With this analysis, we can estimate the impact of our activities against the outbreak on the number of cases.</p>
<div class="section" id="Preparation">
<h2>Preparation<a class="headerlink" href="#Preparation" title="Permalink to this headline">¶</a></h2>
<p>Prepare the packages.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># !pip install covsirphy --upgrade</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">covsirphy</span> <span class="k">as</span> <span class="nn">cs</span>
<span class="n">cs</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;2.19.1-mu-fu1&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Dataset-preparation">
<h2>Dataset preparation<a class="headerlink" href="#Dataset-preparation" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Download the datasets to “../input” directory and load them.</div>
<div class="line">Please refer to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_dataset.html">Usage: datasets</a> for the details.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data_loader</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span><span class="s2">&quot;../input&quot;</span><span class="p">)</span>
<span class="c1"># The number of cases (JHU style)</span>
<span class="n">jhu_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">jhu</span><span class="p">()</span>
<span class="c1"># Population in each country</span>
<span class="n">population_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">population</span><span class="p">()</span>
<span class="c1"># Government Response Tracker (OxCGRT)</span>
<span class="n">oxcgrt_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">oxcgrt</span><span class="p">()</span>
<span class="c1"># The number of tests</span>
<span class="n">pcr_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">pcr</span><span class="p">()</span>
<span class="c1"># The number of vaccinations</span>
<span class="n">vaccine_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">vaccine</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Start-scenario-analysis">
<h2>Start scenario analysis<a class="headerlink" href="#Start-scenario-analysis" title="Permalink to this headline">¶</a></h2>
<p>As an example, we will analysis the number of cases in Japan. <code class="docutils literal notranslate"><span class="pre">covsirphy.Scenario</span></code> is the interface for analysis. Please specify the area (country: required, province: optional) when creating the instance and register the datasets with <code class="docutils literal notranslate"><span class="pre">Scenario.register()</span></code>. As the extra datasets, we can select <code class="docutils literal notranslate"><span class="pre">OxCGRTData</span></code>, <code class="docutils literal notranslate"><span class="pre">PCRData</span></code>, <code class="docutils literal notranslate"><span class="pre">VaccineData</span></code> and <code class="docutils literal notranslate"><span class="pre">CountryData</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Specify country and province (optinal) names</span>
<span class="n">snl</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">country</span><span class="o">=</span><span class="s2">&quot;Japan&quot;</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="c1"># Register datasets</span>
<span class="n">snl</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">jhu_data</span><span class="p">,</span> <span class="n">population_data</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="p">[</span><span class="n">oxcgrt_data</span><span class="p">,</span> <span class="n">pcr_data</span><span class="p">,</span> <span class="n">vaccine_data</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">We call <code class="docutils literal notranslate"><span class="pre">JHUData</span></code> and <code class="docutils literal notranslate"><span class="pre">PopulationData</span></code> as “the main datasets” because they are required to calculate the number of susceptible/infected/recovered/fatal cases. These variables are used in SIR-F model.</div>
<div class="line">The other datasets are called as “the extra datasets” and they will be used to predict the futute parameter values of SIR-F model for forecasting the number of cases with some scenarios.</div>
</div>
<div class="line-block">
<div class="line">Note:</div>
<div class="line">From development version 2.19.1-lambda, instance of <code class="docutils literal notranslate"><span class="pre">PopulationData</span></code> is not required because <code class="docutils literal notranslate"><span class="pre">JHUData</span></code> includes population values and the number of susceptible cases.</div>
</div>
<p>Additional information:</p>
<ul class="simple">
<li><p>Details of the datasets: <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_dataset.html">Usage: datasets</a></p></li>
<li><p>Details of SIR-F model: <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_theoretical.html">Usage: SIR-derived models</a></p></li>
</ul>
<div class="section" id="Display/save-figures">
<h3>Display/save figures<a class="headerlink" href="#Display/save-figures" title="Permalink to this headline">¶</a></h3>
<p>We have intactive mode and script mode to display/save figures.</p>
<p>When use use interactive shells, including Jupyter Notebook, we can choose either “interactive shell mode” or “script mode” as follows.</p>
<div class="line-block">
<div class="line">Interactive mode:</div>
<div class="line">Figures will be displayed as the output of code cells.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Choose interactive mode (default is True when we use interactive shells)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<p>When you want to turn-off interactive mode temporarlly, set <code class="docutils literal notranslate"><span class="pre">False</span></code> as <code class="docutils literal notranslate"><span class="pre">Scenario.interactive</span></code> or apply <code class="docutils literal notranslate"><span class="pre">show_figure=False</span></code> as an argument of methods, including <code class="docutils literal notranslate"><span class="pre">Scenario.records()</span></code>. Methods with figures will be shown later in this tutorial.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># apply &quot;show_figures=False&quot; to turn-off intaractive mode temporally</span>
<span class="c1"># snl.records(show_figure=False)</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Script mode:</div>
<div class="line">In script mode, figures will not be displayed. When filenames were applied to the methods as <code class="docutils literal notranslate"><span class="pre">filename</span></code> argument, figures will be saved in your local environment.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Stop displaying figures</span>
<span class="c1"># snl.interactive = False</span>
<span class="c1"># With this mode we can save figures, specifying &quot;filename&quot; argument</span>
<span class="c1"># snl.records(filename=&quot;records.jpg&quot;)</span>
</pre></div>
</div>
</div>
<p>When we run codes as a script (eg. <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scenario_analysis.py</span></code>), only “script mode” is selectable and <code class="docutils literal notranslate"><span class="pre">Scenario.interactive</span></code> is always <code class="docutils literal notranslate"><span class="pre">False</span></code>. Figures will be saved when filenames are specified with <code class="docutils literal notranslate"><span class="pre">filename</span></code> argument.</p>
<p>Because some methods, including <code class="docutils literal notranslate"><span class="pre">Scenario.summary()</span></code>, return dataframes (<code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>), we can save them as CSV files etc. using <code class="docutils literal notranslate"><span class="pre">.to_csv(filename,</span> <span class="pre">index=True)</span></code>.</p>
<p>We can produce filenames more easily with <code class="docutils literal notranslate"><span class="pre">Filer</span></code> class. Please refer to the scripts in <a class="reference external" href="https://github.com/lisphilar/covid19-sir/tree/master/example">example directory of the repository</a>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filer</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Filer</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;jpn&quot;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">numbering</span><span class="o">=</span><span class="s2">&quot;01&quot;</span><span class="p">)</span>
<span class="c1"># filer.png(&quot;records&quot;)</span>
<span class="c1"># -&gt; {&quot;filename&quot;: &quot;&lt;absolute path&gt;/output/jpn_01_records.png&quot;}</span>
<span class="c1"># filer.jpg(&quot;records&quot;)</span>
<span class="c1"># -&gt; {&quot;filename&quot;: &quot;&lt;absolute path&gt;/output/jpn_01_records.jpg&quot;}</span>
<span class="c1"># filer.csv(&quot;records&quot;, index=True)</span>
<span class="c1"># -&gt; {&quot;path_or_buf&quot;: &quot;&lt;absolute path&gt;/output/jpn_01_records.csv&quot;, index: True}</span>
</pre></div>
</div>
</div>
<p>We can save files more easily with <code class="docutils literal notranslate"><span class="pre">Filer</span></code> as follows.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># record_df = snl.records(**filer.png(&quot;records&quot;))</span>
<span class="c1"># record_df.to_csv(**filer.csv(&quot;records&quot;, index=False))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Backup/restore-scenario">
<h3>Backup/restore scenario<a class="headerlink" href="#Backup/restore-scenario" title="Permalink to this headline">¶</a></h3>
<p>From development version 2.19.1-kappa, we have <code class="docutils literal notranslate"><span class="pre">Scenario.backup(filename)</span></code> and <code class="docutils literal notranslate"><span class="pre">Scenario.restore(filename)</span></code> to backup/restore timepoints and phase information. This will be helpful when we perform parameter estimation using a server and simulate with the estimated parameter values using local machines.</p>
<p>Note that we need to execute <code class="docutils literal notranslate"><span class="pre">Scenario.register()</span></code> in advance to set timepoints with <code class="docutils literal notranslate"><span class="pre">Scenario.restore()</span></code>.</p>
<p>Backup information:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># backupfile_dict = cs.Filer(directory=&quot;output&quot;)</span>
<span class="c1"># snl.backup(**backupfile_dict)</span>
</pre></div>
</div>
</div>
<p>Restore information:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># backupfile_dict = cs.Filer(directory=&quot;output&quot;)</span>
<span class="c1"># snl = cs.Scenario(country=&quot;Japan&quot;)</span>
<span class="c1"># snl.register(jhu_data, population_data)</span>
<span class="c1"># snl.restore(**backupfile_dict).summary()</span>
</pre></div>
</div>
</div>
<p>After restoring information, we can skip <code class="docutils literal notranslate"><span class="pre">Scenario.trend()</span></code> and <code class="docutils literal notranslate"><span class="pre">Scenario.estiate()</span></code> (their functionarities will be explaiend later).</p>
</div>
</div>
<div class="section" id="Check-records">
<h2>Check records<a class="headerlink" href="#Check-records" title="Permalink to this headline">¶</a></h2>
<p>Let’s see the records at first. <code class="docutils literal notranslate"><span class="pre">Scenario.records()</span></code> method return the records as a pandas dataframe and show a line plot. Some kind of complement will be done for analysis, if necessary.</p>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.records()</span></code> shows the number of infected/recovered/fatal cases as default. Using <code class="docutils literal notranslate"><span class="pre">variables</span></code> argument, we can set the variables to show. Here, we chack the number of confirmed/fatal/recovered cases. They are cumurative values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">records</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="s2">&quot;CFR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="c1"># This is the same as</span>
<span class="c1"># snl.records(variables=[&quot;Confirmed&quot;, &quot;Fatal&quot;, &quot;Recovered&quot;])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_30_0.png" src="_images/usage_quick_30_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>460</th>
      <td>2021-05-11</td>
      <td>645817</td>
      <td>10941</td>
      <td>564128</td>
    </tr>
    <tr>
      <th>461</th>
      <td>2021-05-12</td>
      <td>651702</td>
      <td>11064</td>
      <td>568558</td>
    </tr>
    <tr>
      <th>462</th>
      <td>2021-05-13</td>
      <td>658629</td>
      <td>11165</td>
      <td>573913</td>
    </tr>
    <tr>
      <th>463</th>
      <td>2021-05-14</td>
      <td>665547</td>
      <td>11255</td>
      <td>579446</td>
    </tr>
    <tr>
      <th>464</th>
      <td>2021-05-15</td>
      <td>671841</td>
      <td>11365</td>
      <td>584770</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The number of infected cases on date:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">records</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="s2">&quot;I&quot;</span><span class="p">)</span>
<span class="c1"># This is the same as</span>
<span class="c1"># snl.records(variables=[&quot;Infected&quot;])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_32_0.png" src="_images/usage_quick_32_0.png" />
</div>
</div>
<p>All available variables can be retrieved with <code class="docutils literal notranslate"><span class="pre">variables=&quot;all&quot;</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">records</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">show_figure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">compact</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;Confirmed&#39;, &#39;Infected&#39;, &#39;Fatal&#39;, &#39;Recovered&#39;, &#39;Susceptible&#39;, &#39;School_closing&#39;,
 &#39;Workplace_closing&#39;, &#39;Cancel_events&#39;, &#39;Gatherings_restrictions&#39;,
 &#39;Transport_closing&#39;, &#39;Stay_home_restrictions&#39;,
 &#39;Internal_movement_restrictions&#39;, &#39;International_movement_restrictions&#39;,
 &#39;Information_campaigns&#39;, &#39;Testing_policy&#39;, &#39;Contact_tracing&#39;,
 &#39;Stringency_index&#39;, &#39;Tests&#39;, &#39;Tests_diff&#39;, &#39;Vaccinations&#39;, &#39;Vaccinated_once&#39;,
 &#39;Vaccinated_full&#39;]
</pre></div></div>
</div>
<p>We can specify the variables to show.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">records</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Vaccinated_once&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_36_0.png" src="_images/usage_quick_36_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Vaccinated_once</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>460</th>
      <td>2021-05-11</td>
      <td>3674147</td>
    </tr>
    <tr>
      <th>461</th>
      <td>2021-05-12</td>
      <td>3844717</td>
    </tr>
    <tr>
      <th>462</th>
      <td>2021-05-13</td>
      <td>4027333</td>
    </tr>
    <tr>
      <th>463</th>
      <td>2021-05-14</td>
      <td>4027333</td>
    </tr>
    <tr>
      <th>464</th>
      <td>2021-05-15</td>
      <td>4027333</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can calculate the number of daily new cases with <code class="docutils literal notranslate"><span class="pre">Scenario.record_diff()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Acceptable variables are the same as Scenario.records()</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">records_diff</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_38_0.png" src="_images/usage_quick_38_0.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.show_complement()</span></code> method is useful to show the kinds of complement. The details of complement are explained in <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_dataset.html#The-number-of-cases-(JHU-style)">Usage: datasets</a> section.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the details of complement</span>
<span class="n">snl</span><span class="o">.</span><span class="n">show_complement</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Province</th>
      <th>Monotonic_confirmed</th>
      <th>Monotonic_fatal</th>
      <th>Monotonic_recovered</th>
      <th>Full_recovered</th>
      <th>Partial_recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Japan</td>
      <td>-</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="S-R-trend-analysis">
<h2>S-R trend analysis<a class="headerlink" href="#S-R-trend-analysis" title="Permalink to this headline">¶</a></h2>
<p>S-R trend analysis finds the change points of SIR-derived ODE parameters. Details will be explained in <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_phases.html">Usage (details: phases)</a>. Phases will be separated with dotted lines. i.e. Dot lines indicate the start dates of phases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">trend</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_42_0.png" src="_images/usage_quick_42_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>18Feb2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>19Feb2020</td>
      <td>05Mar2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>06Mar2020</td>
      <td>13Mar2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>14Mar2020</td>
      <td>24Mar2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>25Mar2020</td>
      <td>02Apr2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>03Apr2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>01May2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>02May2020</td>
      <td>11May2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>12May2020</td>
      <td>20May2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>21May2020</td>
      <td>28May2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>29May2020</td>
      <td>05Jun2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>06Jun2020</td>
      <td>13Jun2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>14Jun2020</td>
      <td>28Jun2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>Past</td>
      <td>29Jun2020</td>
      <td>09Jul2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>14th</th>
      <td>Past</td>
      <td>10Jul2020</td>
      <td>21Jul2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>15th</th>
      <td>Past</td>
      <td>22Jul2020</td>
      <td>01Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>16th</th>
      <td>Past</td>
      <td>02Aug2020</td>
      <td>10Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>17th</th>
      <td>Past</td>
      <td>11Aug2020</td>
      <td>20Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>18th</th>
      <td>Past</td>
      <td>21Aug2020</td>
      <td>28Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>19th</th>
      <td>Past</td>
      <td>29Aug2020</td>
      <td>09Sep2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>20th</th>
      <td>Past</td>
      <td>10Sep2020</td>
      <td>18Sep2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>21st</th>
      <td>Past</td>
      <td>19Sep2020</td>
      <td>30Sep2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>22nd</th>
      <td>Past</td>
      <td>01Oct2020</td>
      <td>13Oct2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>23rd</th>
      <td>Past</td>
      <td>14Oct2020</td>
      <td>23Oct2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>24th</th>
      <td>Past</td>
      <td>24Oct2020</td>
      <td>04Nov2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>25th</th>
      <td>Past</td>
      <td>05Nov2020</td>
      <td>13Nov2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>26th</th>
      <td>Past</td>
      <td>14Nov2020</td>
      <td>26Nov2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>27th</th>
      <td>Past</td>
      <td>27Nov2020</td>
      <td>09Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>28th</th>
      <td>Past</td>
      <td>10Dec2020</td>
      <td>18Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>29th</th>
      <td>Past</td>
      <td>19Dec2020</td>
      <td>29Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>30th</th>
      <td>Past</td>
      <td>30Dec2020</td>
      <td>07Jan2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>31st</th>
      <td>Past</td>
      <td>08Jan2021</td>
      <td>16Jan2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>32nd</th>
      <td>Past</td>
      <td>17Jan2021</td>
      <td>24Jan2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>33rd</th>
      <td>Past</td>
      <td>25Jan2021</td>
      <td>01Feb2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>34th</th>
      <td>Past</td>
      <td>02Feb2021</td>
      <td>09Feb2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>35th</th>
      <td>Past</td>
      <td>10Feb2021</td>
      <td>17Feb2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>36th</th>
      <td>Past</td>
      <td>18Feb2021</td>
      <td>02Mar2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>37th</th>
      <td>Past</td>
      <td>03Mar2021</td>
      <td>12Mar2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>38th</th>
      <td>Past</td>
      <td>13Mar2021</td>
      <td>25Mar2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>39th</th>
      <td>Past</td>
      <td>26Mar2021</td>
      <td>06Apr2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>40th</th>
      <td>Past</td>
      <td>07Apr2021</td>
      <td>14Apr2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>41st</th>
      <td>Past</td>
      <td>15Apr2021</td>
      <td>23Apr2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>42nd</th>
      <td>Past</td>
      <td>24Apr2021</td>
      <td>03May2021</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>43rd</th>
      <td>Past</td>
      <td>04May2021</td>
      <td>15May2021</td>
      <td>126529100</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Parameter-estimation-of-ODE-models">
<h2>Parameter estimation of ODE models<a class="headerlink" href="#Parameter-estimation-of-ODE-models" title="Permalink to this headline">¶</a></h2>
<p>Here, we will estimate the tau value [min] (using grid search) and parameter values of SIR-derived models using <a class="reference external" href="https://github.com/optuna/optuna">Optuna</a> package (automated hyperparameter optimization framework). As an example, we use SIR-F model. Details of models will be explained in <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_theoretical.html">Usage (details: theoritical datasets)</a>.</p>
<p><strong>We can select the model from SIR, SIRD and SIR-F model for parameter estimation. SIR-FV model (completely deprecated) and SEWIR-F model cannot be used.</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Estimate the tau value and parameter values of SIR-F model</span>
<span class="c1"># Default value of timeout in each phase is 180 sec</span>
<span class="n">snl</span><span class="o">.</span><span class="n">estimate</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         9th phase (21May2020 - 28May2020): finished  214 trials in 0 min  5 sec
        10th phase (29May2020 - 05Jun2020): finished  237 trials in 0 min  5 sec
        11th phase (06Jun2020 - 13Jun2020): finished  219 trials in 0 min  5 sec
         0th phase (06Feb2020 - 18Feb2020): finished 1016 trials in 0 min 25 sec
         3rd phase (14Mar2020 - 24Mar2020): finished 1003 trials in 0 min 30 sec
         6th phase (17Apr2020 - 01May2020): finished 1141 trials in 0 min 35 sec
         1st phase (19Feb2020 - 05Mar2020): finished  716 trials in 0 min 20 sec
         4th phase (25Mar2020 - 02Apr2020): finished  846 trials in 0 min 25 sec
        12th phase (14Jun2020 - 28Jun2020): finished 1476 trials in 0 min 50 sec
         2nd phase (06Mar2020 - 13Mar2020): finished  971 trials in 0 min 30 sec
        15th phase (22Jul2020 - 01Aug2020): finished  423 trials in 0 min 10 sec
         7th phase (02May2020 - 11May2020): finished 1538 trials in 0 min 55 sec
         5th phase (03Apr2020 - 16Apr2020): finished 1108 trials in 0 min 35 sec
        18th phase (21Aug2020 - 28Aug2020): finished  218 trials in 0 min  5 sec
        19th phase (29Aug2020 - 09Sep2020): finished  236 trials in 0 min  5 sec
        20th phase (10Sep2020 - 18Sep2020): finished  211 trials in 0 min  5 sec
         8th phase (12May2020 - 20May2020): finished  712 trials in 0 min 20 sec
        24th phase (24Oct2020 - 04Nov2020): finished  230 trials in 0 min  5 sec
        25th phase (05Nov2020 - 13Nov2020): finished  237 trials in 0 min  5 sec
        13th phase (29Jun2020 - 09Jul2020): finished 1668 trials in 1 min  0 sec
        16th phase (02Aug2020 - 10Aug2020): finished 1659 trials in 1 min  0 sec
        21st phase (19Sep2020 - 30Sep2020): finished 1245 trials in 0 min 40 sec
        26th phase (14Nov2020 - 26Nov2020): finished 1119 trials in 0 min 35 sec
        22nd phase (01Oct2020 - 13Oct2020): finished 1212 trials in 0 min 40 sec
        14th phase (10Jul2020 - 21Jul2020): finished 1606 trials in 1 min  0 sec
        30th phase (30Dec2020 - 07Jan2021): finished  231 trials in 0 min  5 sec
        17th phase (11Aug2020 - 20Aug2020): finished 1551 trials in 0 min 55 sec
        33rd phase (25Jan2021 - 01Feb2021): finished  236 trials in 0 min  5 sec
        34th phase (02Feb2021 - 09Feb2021): finished  212 trials in 0 min  5 sec
        35th phase (10Feb2021 - 17Feb2021): finished  210 trials in 0 min  5 sec
        23rd phase (14Oct2020 - 23Oct2020): finished 1020 trials in 0 min 30 sec
        27th phase (27Nov2020 - 09Dec2020): finished 1713 trials in 1 min  5 sec
        36th phase (18Feb2021 - 02Mar2021): finished  231 trials in 0 min  5 sec
        31st phase (08Jan2021 - 16Jan2021): finished  984 trials in 0 min 30 sec
        37th phase (03Mar2021 - 12Mar2021): finished  433 trials in 0 min 10 sec
        28th phase (10Dec2020 - 18Dec2020): finished  979 trials in 0 min 30 sec
        39th phase (26Mar2021 - 06Apr2021): finished 1100 trials in 0 min 35 sec
        38th phase (13Mar2021 - 25Mar2021): finished  993 trials in 0 min 30 sec
        42nd phase (24Apr2021 - 03May2021): finished  230 trials in 0 min  5 sec
        43rd phase (04May2021 - 15May2021): finished  207 trials in 0 min  5 sec
        40th phase (07Apr2021 - 14Apr2021): finished 1004 trials in 0 min 30 sec
        32nd phase (17Jan2021 - 24Jan2021): finished 1764 trials in 1 min  5 sec
        29th phase (19Dec2020 - 29Dec2020): finished 1458 trials in 0 min 45 sec
        41st phase (15Apr2021 - 23Apr2021): finished 1248 trials in 0 min 30 sec
Completed optimization. Total: 5 min 13 sec
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the summary of parameter estimation</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>alpha1 [-]</th>
      <th>1/alpha2 [day]</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>18Feb2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>2.32</td>
      <td>0.027273</td>
      <td>0.000000</td>
      <td>0.066019</td>
      <td>0.027718</td>
      <td>1440</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0.142890</td>
      <td>1016.0</td>
      <td>0 min 25 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>19Feb2020</td>
      <td>05Mar2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.93</td>
      <td>0.007714</td>
      <td>0.001322</td>
      <td>0.136657</td>
      <td>0.026198</td>
      <td>1440</td>
      <td>0.008</td>
      <td>756.0</td>
      <td>7.0</td>
      <td>38.0</td>
      <td>0.170717</td>
      <td>716.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>06Mar2020</td>
      <td>13Mar2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.45</td>
      <td>0.000288</td>
      <td>0.003503</td>
      <td>0.126216</td>
      <td>0.024882</td>
      <td>1440</td>
      <td>0.0</td>
      <td>285.0</td>
      <td>7.0</td>
      <td>40.0</td>
      <td>0.096661</td>
      <td>971.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>14Mar2020</td>
      <td>24Mar2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>2.51</td>
      <td>0.010285</td>
      <td>0.002518</td>
      <td>0.063876</td>
      <td>0.022654</td>
      <td>1440</td>
      <td>0.01</td>
      <td>397.0</td>
      <td>15.0</td>
      <td>44.0</td>
      <td>0.027972</td>
      <td>1003.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>25Mar2020</td>
      <td>02Apr2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.81</td>
      <td>0.000068</td>
      <td>0.001829</td>
      <td>0.117450</td>
      <td>0.022604</td>
      <td>1440</td>
      <td>0.0</td>
      <td>546.0</td>
      <td>8.0</td>
      <td>44.0</td>
      <td>0.036945</td>
      <td>846.0</td>
      <td>0 min 25 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>03Apr2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>12.55</td>
      <td>0.000363</td>
      <td>0.001137</td>
      <td>0.117748</td>
      <td>0.008241</td>
      <td>1440</td>
      <td>0.0</td>
      <td>879.0</td>
      <td>8.0</td>
      <td>121.0</td>
      <td>0.040911</td>
      <td>1108.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>01May2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.96</td>
      <td>0.029884</td>
      <td>0.000981</td>
      <td>0.044462</td>
      <td>0.021026</td>
      <td>1440</td>
      <td>0.03</td>
      <td>1018.0</td>
      <td>22.0</td>
      <td>47.0</td>
      <td>0.089373</td>
      <td>1141.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>02May2020</td>
      <td>11May2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.26</td>
      <td>0.095520</td>
      <td>0.000975</td>
      <td>0.012374</td>
      <td>0.042073</td>
      <td>1440</td>
      <td>0.096</td>
      <td>1025.0</td>
      <td>80.0</td>
      <td>23.0</td>
      <td>0.099103</td>
      <td>1538.0</td>
      <td>0 min 55 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>12May2020</td>
      <td>20May2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.17</td>
      <td>0.057684</td>
      <td>0.002622</td>
      <td>0.017193</td>
      <td>0.095538</td>
      <td>1440</td>
      <td>0.058</td>
      <td>381.0</td>
      <td>58.0</td>
      <td>10.0</td>
      <td>0.026965</td>
      <td>712.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>21May2020</td>
      <td>28May2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.16</td>
      <td>0.040250</td>
      <td>0.005010</td>
      <td>0.016699</td>
      <td>0.095047</td>
      <td>1440</td>
      <td>0.04</td>
      <td>199.0</td>
      <td>59.0</td>
      <td>10.0</td>
      <td>0.014298</td>
      <td>214.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>29May2020</td>
      <td>05Jun2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.45</td>
      <td>0.017735</td>
      <td>0.003201</td>
      <td>0.032380</td>
      <td>0.066764</td>
      <td>1440</td>
      <td>0.018</td>
      <td>312.0</td>
      <td>30.0</td>
      <td>14.0</td>
      <td>0.013204</td>
      <td>237.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>06Jun2020</td>
      <td>13Jun2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.60</td>
      <td>0.012600</td>
      <td>0.001126</td>
      <td>0.040160</td>
      <td>0.064908</td>
      <td>1440</td>
      <td>0.013</td>
      <td>888.0</td>
      <td>24.0</td>
      <td>15.0</td>
      <td>0.021013</td>
      <td>219.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>14Jun2020</td>
      <td>28Jun2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.96</td>
      <td>0.034689</td>
      <td>0.001545</td>
      <td>0.076432</td>
      <td>0.075659</td>
      <td>1440</td>
      <td>0.035</td>
      <td>647.0</td>
      <td>13.0</td>
      <td>13.0</td>
      <td>0.035520</td>
      <td>1476.0</td>
      <td>0 min 50 sec</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>Past</td>
      <td>29Jun2020</td>
      <td>09Jul2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>2.14</td>
      <td>0.000613</td>
      <td>0.000495</td>
      <td>0.139629</td>
      <td>0.064850</td>
      <td>1440</td>
      <td>0.001</td>
      <td>2019.0</td>
      <td>7.0</td>
      <td>15.0</td>
      <td>0.022931</td>
      <td>1668.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>14th</th>
      <td>Past</td>
      <td>10Jul2020</td>
      <td>21Jul2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>2.02</td>
      <td>0.000089</td>
      <td>0.000085</td>
      <td>0.146110</td>
      <td>0.072395</td>
      <td>1440</td>
      <td>0.0</td>
      <td>11784.0</td>
      <td>6.0</td>
      <td>13.0</td>
      <td>0.019499</td>
      <td>1606.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>15th</th>
      <td>Past</td>
      <td>22Jul2020</td>
      <td>01Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>2.02</td>
      <td>0.000045</td>
      <td>0.000411</td>
      <td>0.138908</td>
      <td>0.068502</td>
      <td>1440</td>
      <td>0.0</td>
      <td>2434.0</td>
      <td>7.0</td>
      <td>14.0</td>
      <td>0.024605</td>
      <td>423.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>16th</th>
      <td>Past</td>
      <td>02Aug2020</td>
      <td>10Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.65</td>
      <td>0.000310</td>
      <td>0.000307</td>
      <td>0.125580</td>
      <td>0.075621</td>
      <td>1440</td>
      <td>0.0</td>
      <td>3262.0</td>
      <td>7.0</td>
      <td>13.0</td>
      <td>0.028521</td>
      <td>1659.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>17th</th>
      <td>Past</td>
      <td>11Aug2020</td>
      <td>20Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.89</td>
      <td>0.000126</td>
      <td>0.000659</td>
      <td>0.081407</td>
      <td>0.090693</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1517.0</td>
      <td>12.0</td>
      <td>11.0</td>
      <td>0.015641</td>
      <td>1551.0</td>
      <td>0 min 55 sec</td>
    </tr>
    <tr>
      <th>18th</th>
      <td>Past</td>
      <td>21Aug2020</td>
      <td>28Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.79</td>
      <td>0.000433</td>
      <td>0.000915</td>
      <td>0.071384</td>
      <td>0.088933</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1092.0</td>
      <td>14.0</td>
      <td>11.0</td>
      <td>0.014559</td>
      <td>218.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>19th</th>
      <td>Past</td>
      <td>29Aug2020</td>
      <td>09Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.75</td>
      <td>0.000319</td>
      <td>0.001368</td>
      <td>0.074762</td>
      <td>0.098323</td>
      <td>1440</td>
      <td>0.0</td>
      <td>730.0</td>
      <td>13.0</td>
      <td>10.0</td>
      <td>0.014191</td>
      <td>236.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>20th</th>
      <td>Past</td>
      <td>10Sep2020</td>
      <td>18Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.86</td>
      <td>0.000158</td>
      <td>0.001648</td>
      <td>0.082144</td>
      <td>0.093759</td>
      <td>1440</td>
      <td>0.0</td>
      <td>606.0</td>
      <td>12.0</td>
      <td>10.0</td>
      <td>0.013723</td>
      <td>211.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>21st</th>
      <td>Past</td>
      <td>19Sep2020</td>
      <td>30Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.88</td>
      <td>0.000312</td>
      <td>0.000997</td>
      <td>0.075151</td>
      <td>0.084253</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1003.0</td>
      <td>13.0</td>
      <td>11.0</td>
      <td>0.022352</td>
      <td>1245.0</td>
      <td>0 min 40 sec</td>
    </tr>
    <tr>
      <th>22nd</th>
      <td>Past</td>
      <td>01Oct2020</td>
      <td>13Oct2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.00</td>
      <td>0.000138</td>
      <td>0.001029</td>
      <td>0.099006</td>
      <td>0.098218</td>
      <td>1440</td>
      <td>0.0</td>
      <td>971.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>0.012246</td>
      <td>1212.0</td>
      <td>0 min 40 sec</td>
    </tr>
    <tr>
      <th>23rd</th>
      <td>Past</td>
      <td>14Oct2020</td>
      <td>23Oct2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.98</td>
      <td>0.000049</td>
      <td>0.001184</td>
      <td>0.110228</td>
      <td>0.111047</td>
      <td>1440</td>
      <td>0.0</td>
      <td>844.0</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>0.012303</td>
      <td>1020.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>24th</th>
      <td>Past</td>
      <td>24Oct2020</td>
      <td>04Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000014</td>
      <td>0.001239</td>
      <td>0.101696</td>
      <td>0.078818</td>
      <td>1440</td>
      <td>0.0</td>
      <td>806.0</td>
      <td>9.0</td>
      <td>12.0</td>
      <td>0.011053</td>
      <td>230.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>25th</th>
      <td>Past</td>
      <td>05Nov2020</td>
      <td>13Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.56</td>
      <td>0.000085</td>
      <td>0.001029</td>
      <td>0.139464</td>
      <td>0.088181</td>
      <td>1440</td>
      <td>0.0</td>
      <td>971.0</td>
      <td>7.0</td>
      <td>11.0</td>
      <td>0.005385</td>
      <td>237.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>26th</th>
      <td>Past</td>
      <td>14Nov2020</td>
      <td>26Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.61</td>
      <td>0.000364</td>
      <td>0.000741</td>
      <td>0.130247</td>
      <td>0.080262</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1348.0</td>
      <td>7.0</td>
      <td>12.0</td>
      <td>0.016179</td>
      <td>1119.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>27th</th>
      <td>Past</td>
      <td>27Nov2020</td>
      <td>09Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.18</td>
      <td>0.000111</td>
      <td>0.001364</td>
      <td>0.107502</td>
      <td>0.089957</td>
      <td>1440</td>
      <td>0.0</td>
      <td>733.0</td>
      <td>9.0</td>
      <td>11.0</td>
      <td>0.012040</td>
      <td>1713.0</td>
      <td>1 min  5 sec</td>
    </tr>
    <tr>
      <th>28th</th>
      <td>Past</td>
      <td>10Dec2020</td>
      <td>18Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.23</td>
      <td>0.000816</td>
      <td>0.001441</td>
      <td>0.109664</td>
      <td>0.087854</td>
      <td>1440</td>
      <td>0.001</td>
      <td>694.0</td>
      <td>9.0</td>
      <td>11.0</td>
      <td>0.013164</td>
      <td>979.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>29th</th>
      <td>Past</td>
      <td>19Dec2020</td>
      <td>29Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.22</td>
      <td>0.000326</td>
      <td>0.001583</td>
      <td>0.101449</td>
      <td>0.081763</td>
      <td>1440</td>
      <td>0.0</td>
      <td>631.0</td>
      <td>9.0</td>
      <td>12.0</td>
      <td>0.012566</td>
      <td>1458.0</td>
      <td>0 min 45 sec</td>
    </tr>
    <tr>
      <th>30th</th>
      <td>Past</td>
      <td>30Dec2020</td>
      <td>07Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.51</td>
      <td>0.001178</td>
      <td>0.001233</td>
      <td>0.098681</td>
      <td>0.064053</td>
      <td>1440</td>
      <td>0.001</td>
      <td>811.0</td>
      <td>10.0</td>
      <td>15.0</td>
      <td>0.009790</td>
      <td>231.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>31st</th>
      <td>Past</td>
      <td>08Jan2021</td>
      <td>16Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.84</td>
      <td>0.000919</td>
      <td>0.001027</td>
      <td>0.113947</td>
      <td>0.060728</td>
      <td>1440</td>
      <td>0.001</td>
      <td>973.0</td>
      <td>8.0</td>
      <td>16.0</td>
      <td>0.027863</td>
      <td>984.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>32nd</th>
      <td>Past</td>
      <td>17Jan2021</td>
      <td>24Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.93</td>
      <td>0.000057</td>
      <td>0.001123</td>
      <td>0.083040</td>
      <td>0.088374</td>
      <td>1440</td>
      <td>0.0</td>
      <td>890.0</td>
      <td>12.0</td>
      <td>11.0</td>
      <td>0.015284</td>
      <td>1764.0</td>
      <td>1 min  5 sec</td>
    </tr>
    <tr>
      <th>33rd</th>
      <td>Past</td>
      <td>25Jan2021</td>
      <td>01Feb2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.59</td>
      <td>0.000628</td>
      <td>0.001566</td>
      <td>0.059200</td>
      <td>0.098162</td>
      <td>1440</td>
      <td>0.001</td>
      <td>638.0</td>
      <td>16.0</td>
      <td>10.0</td>
      <td>0.009006</td>
      <td>236.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>34th</th>
      <td>Past</td>
      <td>02Feb2021</td>
      <td>09Feb2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.49</td>
      <td>0.000116</td>
      <td>0.002647</td>
      <td>0.055649</td>
      <td>0.110122</td>
      <td>1440</td>
      <td>0.0</td>
      <td>377.0</td>
      <td>17.0</td>
      <td>9.0</td>
      <td>0.006795</td>
      <td>212.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>35th</th>
      <td>Past</td>
      <td>10Feb2021</td>
      <td>17Feb2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.63</td>
      <td>0.000201</td>
      <td>0.003086</td>
      <td>0.073072</td>
      <td>0.112896</td>
      <td>1440</td>
      <td>0.0</td>
      <td>324.0</td>
      <td>13.0</td>
      <td>8.0</td>
      <td>0.010449</td>
      <td>210.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>36th</th>
      <td>Past</td>
      <td>18Feb2021</td>
      <td>02Mar2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.70</td>
      <td>0.000331</td>
      <td>0.003702</td>
      <td>0.073337</td>
      <td>0.100348</td>
      <td>1440</td>
      <td>0.0</td>
      <td>270.0</td>
      <td>13.0</td>
      <td>9.0</td>
      <td>0.007700</td>
      <td>231.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>37th</th>
      <td>Past</td>
      <td>03Mar2021</td>
      <td>12Mar2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.89</td>
      <td>0.008978</td>
      <td>0.003756</td>
      <td>0.082343</td>
      <td>0.087709</td>
      <td>1440</td>
      <td>0.009</td>
      <td>266.0</td>
      <td>12.0</td>
      <td>11.0</td>
      <td>0.008289</td>
      <td>433.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>38th</th>
      <td>Past</td>
      <td>13Mar2021</td>
      <td>25Mar2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.008487</td>
      <td>0.002109</td>
      <td>0.090590</td>
      <td>0.077924</td>
      <td>1440</td>
      <td>0.008</td>
      <td>474.0</td>
      <td>11.0</td>
      <td>12.0</td>
      <td>0.012063</td>
      <td>993.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>39th</th>
      <td>Past</td>
      <td>26Mar2021</td>
      <td>06Apr2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.63</td>
      <td>0.000224</td>
      <td>0.001514</td>
      <td>0.117072</td>
      <td>0.070168</td>
      <td>1440</td>
      <td>0.0</td>
      <td>660.0</td>
      <td>8.0</td>
      <td>14.0</td>
      <td>0.011574</td>
      <td>1100.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>40th</th>
      <td>Past</td>
      <td>07Apr2021</td>
      <td>14Apr2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.51</td>
      <td>0.000403</td>
      <td>0.000822</td>
      <td>0.119390</td>
      <td>0.078097</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1216.0</td>
      <td>8.0</td>
      <td>12.0</td>
      <td>0.018775</td>
      <td>1004.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>41st</th>
      <td>Past</td>
      <td>15Apr2021</td>
      <td>23Apr2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.70</td>
      <td>0.000224</td>
      <td>0.000942</td>
      <td>0.113804</td>
      <td>0.066025</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1061.0</td>
      <td>8.0</td>
      <td>15.0</td>
      <td>0.013589</td>
      <td>1248.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>42nd</th>
      <td>Past</td>
      <td>24Apr2021</td>
      <td>03May2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.39</td>
      <td>0.000344</td>
      <td>0.000973</td>
      <td>0.092031</td>
      <td>0.065376</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1028.0</td>
      <td>10.0</td>
      <td>15.0</td>
      <td>0.004478</td>
      <td>230.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>43rd</th>
      <td>Past</td>
      <td>04May2021</td>
      <td>15May2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>0.009243</td>
      <td>207.0</td>
      <td>0 min  5 sec</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Evaluation-of-estimation-accuracy">
<h2>Evaluation of estimation accuracy<a class="headerlink" href="#Evaluation-of-estimation-accuracy" title="Permalink to this headline">¶</a></h2>
<p>Accuracy of parameter estimation can be evaluated with RMSLE (Root Mean Squared Log Error) score.</p>
<div class="math notranslate nohighlight">
\begin{align*}
\mathrm{RMSLE} = \sqrt{\cfrac{1}{n}\sum_{i=1}^{n}(log_{10}(A_{i} + 1) - log_{10}(P_{i} + 1))^2}
\end{align*}</div><p>Where <span class="math notranslate nohighlight">\(A\)</span> is the observed (actual) values, <span class="math notranslate nohighlight">\(P\)</span> is estimated (predicted) values. Variables are <span class="math notranslate nohighlight">\(S (i=1), I (i=2), R (i=3)\ \mathrm{and}\ F (i=n=4)\)</span> for SIR-F model. When RMSLE score is low, hyperparameter estimation is highly accurate. Please refer to external sites, including <a class="reference external" href="https://medium.com/analytics-vidhya/root-mean-square-log-error-rmse-vs-rmlse-935c6cc1802a">Medium: What’s the Difference Between RMSE and RMSLE?</a></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show RMSLE scores with the number of optimization trials and runtime for phases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Start&quot;</span><span class="p">,</span> <span class="s2">&quot;End&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSLE&quot;</span><span class="p">,</span> <span class="s2">&quot;Trials&quot;</span><span class="p">,</span> <span class="s2">&quot;Runtime&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>06Feb2020</td>
      <td>18Feb2020</td>
      <td>0.142890</td>
      <td>1016.0</td>
      <td>0 min 25 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>19Feb2020</td>
      <td>05Mar2020</td>
      <td>0.170717</td>
      <td>716.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>06Mar2020</td>
      <td>13Mar2020</td>
      <td>0.096661</td>
      <td>971.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>14Mar2020</td>
      <td>24Mar2020</td>
      <td>0.027972</td>
      <td>1003.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>25Mar2020</td>
      <td>02Apr2020</td>
      <td>0.036945</td>
      <td>846.0</td>
      <td>0 min 25 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>03Apr2020</td>
      <td>16Apr2020</td>
      <td>0.040911</td>
      <td>1108.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>17Apr2020</td>
      <td>01May2020</td>
      <td>0.089373</td>
      <td>1141.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>02May2020</td>
      <td>11May2020</td>
      <td>0.099103</td>
      <td>1538.0</td>
      <td>0 min 55 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>12May2020</td>
      <td>20May2020</td>
      <td>0.026965</td>
      <td>712.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>21May2020</td>
      <td>28May2020</td>
      <td>0.014298</td>
      <td>214.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>29May2020</td>
      <td>05Jun2020</td>
      <td>0.013204</td>
      <td>237.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>06Jun2020</td>
      <td>13Jun2020</td>
      <td>0.021013</td>
      <td>219.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>14Jun2020</td>
      <td>28Jun2020</td>
      <td>0.035520</td>
      <td>1476.0</td>
      <td>0 min 50 sec</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>29Jun2020</td>
      <td>09Jul2020</td>
      <td>0.022931</td>
      <td>1668.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>14th</th>
      <td>10Jul2020</td>
      <td>21Jul2020</td>
      <td>0.019499</td>
      <td>1606.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>15th</th>
      <td>22Jul2020</td>
      <td>01Aug2020</td>
      <td>0.024605</td>
      <td>423.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>16th</th>
      <td>02Aug2020</td>
      <td>10Aug2020</td>
      <td>0.028521</td>
      <td>1659.0</td>
      <td>1 min  0 sec</td>
    </tr>
    <tr>
      <th>17th</th>
      <td>11Aug2020</td>
      <td>20Aug2020</td>
      <td>0.015641</td>
      <td>1551.0</td>
      <td>0 min 55 sec</td>
    </tr>
    <tr>
      <th>18th</th>
      <td>21Aug2020</td>
      <td>28Aug2020</td>
      <td>0.014559</td>
      <td>218.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>19th</th>
      <td>29Aug2020</td>
      <td>09Sep2020</td>
      <td>0.014191</td>
      <td>236.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>20th</th>
      <td>10Sep2020</td>
      <td>18Sep2020</td>
      <td>0.013723</td>
      <td>211.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>21st</th>
      <td>19Sep2020</td>
      <td>30Sep2020</td>
      <td>0.022352</td>
      <td>1245.0</td>
      <td>0 min 40 sec</td>
    </tr>
    <tr>
      <th>22nd</th>
      <td>01Oct2020</td>
      <td>13Oct2020</td>
      <td>0.012246</td>
      <td>1212.0</td>
      <td>0 min 40 sec</td>
    </tr>
    <tr>
      <th>23rd</th>
      <td>14Oct2020</td>
      <td>23Oct2020</td>
      <td>0.012303</td>
      <td>1020.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>24th</th>
      <td>24Oct2020</td>
      <td>04Nov2020</td>
      <td>0.011053</td>
      <td>230.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>25th</th>
      <td>05Nov2020</td>
      <td>13Nov2020</td>
      <td>0.005385</td>
      <td>237.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>26th</th>
      <td>14Nov2020</td>
      <td>26Nov2020</td>
      <td>0.016179</td>
      <td>1119.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>27th</th>
      <td>27Nov2020</td>
      <td>09Dec2020</td>
      <td>0.012040</td>
      <td>1713.0</td>
      <td>1 min  5 sec</td>
    </tr>
    <tr>
      <th>28th</th>
      <td>10Dec2020</td>
      <td>18Dec2020</td>
      <td>0.013164</td>
      <td>979.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>29th</th>
      <td>19Dec2020</td>
      <td>29Dec2020</td>
      <td>0.012566</td>
      <td>1458.0</td>
      <td>0 min 45 sec</td>
    </tr>
    <tr>
      <th>30th</th>
      <td>30Dec2020</td>
      <td>07Jan2021</td>
      <td>0.009790</td>
      <td>231.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>31st</th>
      <td>08Jan2021</td>
      <td>16Jan2021</td>
      <td>0.027863</td>
      <td>984.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>32nd</th>
      <td>17Jan2021</td>
      <td>24Jan2021</td>
      <td>0.015284</td>
      <td>1764.0</td>
      <td>1 min  5 sec</td>
    </tr>
    <tr>
      <th>33rd</th>
      <td>25Jan2021</td>
      <td>01Feb2021</td>
      <td>0.009006</td>
      <td>236.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>34th</th>
      <td>02Feb2021</td>
      <td>09Feb2021</td>
      <td>0.006795</td>
      <td>212.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>35th</th>
      <td>10Feb2021</td>
      <td>17Feb2021</td>
      <td>0.010449</td>
      <td>210.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>36th</th>
      <td>18Feb2021</td>
      <td>02Mar2021</td>
      <td>0.007700</td>
      <td>231.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>37th</th>
      <td>03Mar2021</td>
      <td>12Mar2021</td>
      <td>0.008289</td>
      <td>433.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>38th</th>
      <td>13Mar2021</td>
      <td>25Mar2021</td>
      <td>0.012063</td>
      <td>993.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>39th</th>
      <td>26Mar2021</td>
      <td>06Apr2021</td>
      <td>0.011574</td>
      <td>1100.0</td>
      <td>0 min 35 sec</td>
    </tr>
    <tr>
      <th>40th</th>
      <td>07Apr2021</td>
      <td>14Apr2021</td>
      <td>0.018775</td>
      <td>1004.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>41st</th>
      <td>15Apr2021</td>
      <td>23Apr2021</td>
      <td>0.013589</td>
      <td>1248.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>42nd</th>
      <td>24Apr2021</td>
      <td>03May2021</td>
      <td>0.004478</td>
      <td>230.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>43rd</th>
      <td>04May2021</td>
      <td>15May2021</td>
      <td>0.009243</td>
      <td>207.0</td>
      <td>0 min  5 sec</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Additionally, we can visualize the accuracy with <code class="docutils literal notranslate"><span class="pre">Scenario.estimate_accuracy()</span></code>, specifing phase name.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Visualize the accuracy for the 2nd phase</span>
<span class="n">snl</span><span class="o">.</span><span class="n">estimate_accuracy</span><span class="p">(</span><span class="n">phase</span><span class="o">=</span><span class="s2">&quot;2nd&quot;</span><span class="p">)</span>
<span class="c1"># phase=&quot;last&quot; means the last phases</span>
<span class="c1"># snl.estimate_accuracy(phase=&quot;last&quot;)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_49_0.png" src="_images/usage_quick_49_0.png" />
</div>
</div>
<p>We can calculate total score for all phases using <code class="docutils literal notranslate"><span class="pre">Scenario.score()</span></code> method. Metrics can be selected from MAE, MSE, MSLE, RMSE and RMSLE.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get total score: metrics=&quot;MAE&quot;, &quot;MSE&quot;, &quot;MSLE&quot;, &quot;RMSE&quot; or &quot;RMSLE&quot;</span>
<span class="c1"># snl.score(metrics=&quot;RMSLE&quot;)</span>
<span class="n">metrics_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;MAE&quot;</span><span class="p">,</span> <span class="s2">&quot;MSE&quot;</span><span class="p">,</span> <span class="s2">&quot;MSLE&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSLE&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">metrics_list</span><span class="p">:</span>
    <span class="n">metrics_name</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">metrics_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">metrics_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">snl</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
  MAE: 641.124
  MSE: 1695853.633
 MSLE: 0.003
 RMSE: 1019.654
RMSLE: 0.059
</pre></div></div>
</div>
</div>
<div class="section" id="Get-parameter-value">
<h2>Get parameter value<a class="headerlink" href="#Get-parameter-value" title="Permalink to this headline">¶</a></h2>
<p>We can get the parameter values of a phase using <code class="docutils literal notranslate"><span class="pre">Scenario.get()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get parameter values</span>
<span class="n">snl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="s2">&quot;4th&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
4.81
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># phase=&quot;last&quot; means the last phases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.27
</pre></div></div>
</div>
</div>
<div class="section" id="Show-parameter-history">
<h2>Show parameter history<a class="headerlink" href="#Show-parameter-history" title="Permalink to this headline">¶</a></h2>
<p>We can get the history of parameter values with a dataframe and a figure.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get the parameter values as a dataframe</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="o">.</span><span class="n">PARAMETERS</span><span class="p">,</span> <span class="s2">&quot;Rt&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>Rt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>0.027273</td>
      <td>0.000000</td>
      <td>0.066019</td>
      <td>0.027718</td>
      <td>2.32</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>0.007714</td>
      <td>0.001322</td>
      <td>0.136657</td>
      <td>0.026198</td>
      <td>4.93</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>0.000288</td>
      <td>0.003503</td>
      <td>0.126216</td>
      <td>0.024882</td>
      <td>4.45</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>0.010285</td>
      <td>0.002518</td>
      <td>0.063876</td>
      <td>0.022654</td>
      <td>2.51</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>0.000068</td>
      <td>0.001829</td>
      <td>0.117450</td>
      <td>0.022604</td>
      <td>4.81</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>0.000363</td>
      <td>0.001137</td>
      <td>0.117748</td>
      <td>0.008241</td>
      <td>12.55</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>0.029884</td>
      <td>0.000981</td>
      <td>0.044462</td>
      <td>0.021026</td>
      <td>1.96</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>0.095520</td>
      <td>0.000975</td>
      <td>0.012374</td>
      <td>0.042073</td>
      <td>0.26</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>0.057684</td>
      <td>0.002622</td>
      <td>0.017193</td>
      <td>0.095538</td>
      <td>0.17</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>0.040250</td>
      <td>0.005010</td>
      <td>0.016699</td>
      <td>0.095047</td>
      <td>0.16</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>0.017735</td>
      <td>0.003201</td>
      <td>0.032380</td>
      <td>0.066764</td>
      <td>0.45</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>0.012600</td>
      <td>0.001126</td>
      <td>0.040160</td>
      <td>0.064908</td>
      <td>0.60</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>0.034689</td>
      <td>0.001545</td>
      <td>0.076432</td>
      <td>0.075659</td>
      <td>0.96</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>0.000613</td>
      <td>0.000495</td>
      <td>0.139629</td>
      <td>0.064850</td>
      <td>2.14</td>
    </tr>
    <tr>
      <th>14th</th>
      <td>0.000089</td>
      <td>0.000085</td>
      <td>0.146110</td>
      <td>0.072395</td>
      <td>2.02</td>
    </tr>
    <tr>
      <th>15th</th>
      <td>0.000045</td>
      <td>0.000411</td>
      <td>0.138908</td>
      <td>0.068502</td>
      <td>2.02</td>
    </tr>
    <tr>
      <th>16th</th>
      <td>0.000310</td>
      <td>0.000307</td>
      <td>0.125580</td>
      <td>0.075621</td>
      <td>1.65</td>
    </tr>
    <tr>
      <th>17th</th>
      <td>0.000126</td>
      <td>0.000659</td>
      <td>0.081407</td>
      <td>0.090693</td>
      <td>0.89</td>
    </tr>
    <tr>
      <th>18th</th>
      <td>0.000433</td>
      <td>0.000915</td>
      <td>0.071384</td>
      <td>0.088933</td>
      <td>0.79</td>
    </tr>
    <tr>
      <th>19th</th>
      <td>0.000319</td>
      <td>0.001368</td>
      <td>0.074762</td>
      <td>0.098323</td>
      <td>0.75</td>
    </tr>
    <tr>
      <th>20th</th>
      <td>0.000158</td>
      <td>0.001648</td>
      <td>0.082144</td>
      <td>0.093759</td>
      <td>0.86</td>
    </tr>
    <tr>
      <th>21st</th>
      <td>0.000312</td>
      <td>0.000997</td>
      <td>0.075151</td>
      <td>0.084253</td>
      <td>0.88</td>
    </tr>
    <tr>
      <th>22nd</th>
      <td>0.000138</td>
      <td>0.001029</td>
      <td>0.099006</td>
      <td>0.098218</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>23rd</th>
      <td>0.000049</td>
      <td>0.001184</td>
      <td>0.110228</td>
      <td>0.111047</td>
      <td>0.98</td>
    </tr>
    <tr>
      <th>24th</th>
      <td>0.000014</td>
      <td>0.001239</td>
      <td>0.101696</td>
      <td>0.078818</td>
      <td>1.27</td>
    </tr>
    <tr>
      <th>25th</th>
      <td>0.000085</td>
      <td>0.001029</td>
      <td>0.139464</td>
      <td>0.088181</td>
      <td>1.56</td>
    </tr>
    <tr>
      <th>26th</th>
      <td>0.000364</td>
      <td>0.000741</td>
      <td>0.130247</td>
      <td>0.080262</td>
      <td>1.61</td>
    </tr>
    <tr>
      <th>27th</th>
      <td>0.000111</td>
      <td>0.001364</td>
      <td>0.107502</td>
      <td>0.089957</td>
      <td>1.18</td>
    </tr>
    <tr>
      <th>28th</th>
      <td>0.000816</td>
      <td>0.001441</td>
      <td>0.109664</td>
      <td>0.087854</td>
      <td>1.23</td>
    </tr>
    <tr>
      <th>29th</th>
      <td>0.000326</td>
      <td>0.001583</td>
      <td>0.101449</td>
      <td>0.081763</td>
      <td>1.22</td>
    </tr>
    <tr>
      <th>30th</th>
      <td>0.001178</td>
      <td>0.001233</td>
      <td>0.098681</td>
      <td>0.064053</td>
      <td>1.51</td>
    </tr>
    <tr>
      <th>31st</th>
      <td>0.000919</td>
      <td>0.001027</td>
      <td>0.113947</td>
      <td>0.060728</td>
      <td>1.84</td>
    </tr>
    <tr>
      <th>32nd</th>
      <td>0.000057</td>
      <td>0.001123</td>
      <td>0.083040</td>
      <td>0.088374</td>
      <td>0.93</td>
    </tr>
    <tr>
      <th>33rd</th>
      <td>0.000628</td>
      <td>0.001566</td>
      <td>0.059200</td>
      <td>0.098162</td>
      <td>0.59</td>
    </tr>
    <tr>
      <th>34th</th>
      <td>0.000116</td>
      <td>0.002647</td>
      <td>0.055649</td>
      <td>0.110122</td>
      <td>0.49</td>
    </tr>
    <tr>
      <th>35th</th>
      <td>0.000201</td>
      <td>0.003086</td>
      <td>0.073072</td>
      <td>0.112896</td>
      <td>0.63</td>
    </tr>
    <tr>
      <th>36th</th>
      <td>0.000331</td>
      <td>0.003702</td>
      <td>0.073337</td>
      <td>0.100348</td>
      <td>0.70</td>
    </tr>
    <tr>
      <th>37th</th>
      <td>0.008978</td>
      <td>0.003756</td>
      <td>0.082343</td>
      <td>0.087709</td>
      <td>0.89</td>
    </tr>
    <tr>
      <th>38th</th>
      <td>0.008487</td>
      <td>0.002109</td>
      <td>0.090590</td>
      <td>0.077924</td>
      <td>1.12</td>
    </tr>
    <tr>
      <th>39th</th>
      <td>0.000224</td>
      <td>0.001514</td>
      <td>0.117072</td>
      <td>0.070168</td>
      <td>1.63</td>
    </tr>
    <tr>
      <th>40th</th>
      <td>0.000403</td>
      <td>0.000822</td>
      <td>0.119390</td>
      <td>0.078097</td>
      <td>1.51</td>
    </tr>
    <tr>
      <th>41st</th>
      <td>0.000224</td>
      <td>0.000942</td>
      <td>0.113804</td>
      <td>0.066025</td>
      <td>1.70</td>
    </tr>
    <tr>
      <th>42nd</th>
      <td>0.000344</td>
      <td>0.000973</td>
      <td>0.092031</td>
      <td>0.065376</td>
      <td>1.39</td>
    </tr>
    <tr>
      <th>43rd</th>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1.27</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code> method shows the trajectories of parameters (and the number of cases).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_58_0.png" src="_images/usage_quick_58_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_59_0.png" src="_images/usage_quick_59_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;rho&quot;</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_60_0.png" src="_images/usage_quick_60_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;sigma&quot;</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_61_0.png" src="_images/usage_quick_61_0.png" />
</div>
</div>
<div class="line-block">
<div class="line">Notes on the history of <span class="math notranslate nohighlight">\(\sigma\)</span> value in japan (last updated: 28Dec2020):</div>
<div class="line">In Japan, we experienced two waves and we are in third wave. In the first wave (Apr - May), recovery period was too long because collapse of the medical care system occurred and no medicines were found.</div>
</div>
<p>Sigma values: the first wave &lt; the second wave &gt; the third wave</p>
<p>However, in the second wave (Jul - Oct), recovery period appears short because we have some effective medicines (not approved, in clinical study), yonger people (people un-associated to sever diseases) were infected.</p>
<p>In the third wave (Nov - ), older people tend to be infected and we are facing with medical collapse at this time…</p>
</div>
<div class="section" id="Show-the-history-of-reproduction-number">
<h2>Show the history of reproduction number<a class="headerlink" href="#Show-the-history-of-reproduction-number" title="Permalink to this headline">¶</a></h2>
<p><span class="math notranslate nohighlight">\(R_0\)</span> (“R naught”) means “the average number of secondary infections caused by an infected host” (<a class="reference external" href="https://towardsdatascience.com/infection-modeling-part-1-87e74645568a">Infection Modeling — Part 1</a>). When this value is larger than 1, the infection disease is outbreaking.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_64_0.png" src="_images/usage_quick_64_0.png" />
</div>
</div>
</div>
<div class="section" id="Simulate-the-number-of-cases">
<h2>Simulate the number of cases<a class="headerlink" href="#Simulate-the-number-of-cases" title="Permalink to this headline">¶</a></h2>
<p>We can compare the actual and simulated (with estimated parameter values) number of confirmed/infected/recovered/fatal cases using <code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Compare the actual values and the main scenario</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_66_0.png" src="_images/usage_quick_66_0.png" />
</div>
</div>
<p>When we want to show only one scenario with all variables, we use <code class="docutils literal notranslate"><span class="pre">Scenario.simulate()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span><span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_68_0.png" src="_images/usage_quick_68_0.png" />
</div>
</div>
</div>
<div class="section" id="Main-scenario">
<h2>Main scenario<a class="headerlink" href="#Main-scenario" title="Permalink to this headline">¶</a></h2>
<p>To investigate the effect of parameter changes, we will perform scenario analysis. In the main scenario, we will assume that the parameter values do not change after the last past phase.</p>
<p>i.e. If the parameter velues will not be changed until 31Jul2021, how many cases will be? We call this scenario as “Main” scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Clear future phases in Main scenario</span>
<span class="n">snl</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Add one future phase 30 days with the parameter set of the last past phase</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Add one future phase until 31Jul2021 with the same parameter set</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;31Jul2021&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Simulate the number of cases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_70_0.png" src="_images/usage_quick_70_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Infected</th>
      <th>Fatal</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>524</th>
      <td>2021-07-27</td>
      <td>269846</td>
      <td>24438</td>
      <td>1317295</td>
    </tr>
    <tr>
      <th>525</th>
      <td>2021-07-28</td>
      <td>274422</td>
      <td>24754</td>
      <td>1334900</td>
    </tr>
    <tr>
      <th>526</th>
      <td>2021-07-29</td>
      <td>279071</td>
      <td>25074</td>
      <td>1352804</td>
    </tr>
    <tr>
      <th>527</th>
      <td>2021-07-30</td>
      <td>283795</td>
      <td>25400</td>
      <td>1371010</td>
    </tr>
    <tr>
      <th>528</th>
      <td>2021-07-31</td>
      <td>288594</td>
      <td>25732</td>
      <td>1389525</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Medicine-scenario">
<h2>Medicine scenario<a class="headerlink" href="#Medicine-scenario" title="Permalink to this headline">¶</a></h2>
<p>To investigate the effect of new medicines, we will assume that <span class="math notranslate nohighlight">\(\sigma\)</span> will be changed in the future phases.</p>
<p>If <span class="math notranslate nohighlight">\(\sigma\)</span> will be 1.2 times in 30 days, how many cases will be? We will call this scenario as “Medicine” scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Calcuate the current sigma value of the last phase</span>
<span class="n">sigma_current</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sigma&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
<span class="n">sigma_current</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.06469408553199071
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Sigma value will be double</span>
<span class="n">sigma_new</span> <span class="o">=</span> <span class="n">sigma_current</span> <span class="o">*</span> <span class="mf">1.2</span>
<span class="n">sigma_new</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.07763290263838886
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Initialize &quot;Medicine&quot; scenario (with the same past phases as that of Main scenario)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">)</span>
<span class="c1"># Add 30 days as a new future phases with the same parameter set</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma_current</span><span class="p">)</span>
<span class="c1"># Add a phase with doubled sigma value and the same end date with main date</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;31Jul2021&quot;</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma_new</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;covsirphy.analysis.scenario.Scenario at 0x7fa62a8692b0&gt;
</pre></div></div>
</div>
<p>Check summary of future phases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Future&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>alpha1 [-]</th>
      <th>1/alpha2 [day]</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
    <tr>
      <th>Scenario</th>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Main</th>
      <th>44th</th>
      <td>Future</td>
      <td>16May2021</td>
      <td>14Jun2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>45th</th>
      <td>Future</td>
      <td>15Jun2021</td>
      <td>31Jul2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Medicine</th>
      <th>44th</th>
      <td>Future</td>
      <td>16May2021</td>
      <td>14Jun2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>45th</th>
      <td>Future</td>
      <td>15Jun2021</td>
      <td>31Jul2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.077633</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>12.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Simulate the number of cases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_78_0.png" src="_images/usage_quick_78_0.png" />
</div>
</div>
</div>
<div class="section" id="Short-term-prediction-of-parameter-values">
<h2>Short-term prediction of parameter values<a class="headerlink" href="#Short-term-prediction-of-parameter-values" title="Permalink to this headline">¶</a></h2>
<p>With extra datasets, we can predict the ODE parameter values in the future phases because <a class="reference external" href="https://github.com/OxCGRT/covid-policy-tracker">OxCGRT indicators</a> (policy measures), vaccinations and so on impact on parameter values with delay period (the number of days that indicators take for the ODE parameter values to be changed).</p>
<p>OxCGRT indicators are</p>
<ul class="simple">
<li><p>school_closing,</p></li>
<li><p>workplace_closing,</p></li>
<li><p>cancel_events,</p></li>
<li><p>gatherings_restrictions,</p></li>
<li><p>transport_closing,</p></li>
<li><p>stay_home_restrictions,</p></li>
<li><p>internal_movement_restrictions,</p></li>
<li><p>international_movement_restrictions,</p></li>
<li><p>information_campaigns,</p></li>
<li><p>testing_policy, and</p></li>
<li><p>contact_tracing.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.fit()</span></code> method learns the relationship of indicators (X) and the parameter values (y) with regresion model (Elastic Net regression). X was registered with <code class="docutils literal notranslate"><span class="pre">Scenario.register()</span></code> and y was calculated with <code class="docutils literal notranslate"><span class="pre">Scenario.estimate()</span></code> in advance respectively.</p>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.fit()</span></code> has <code class="docutils literal notranslate"><span class="pre">delay</span></code> argument and we can apply the following values.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delay=20</span></code>: Exact value of delay period [days].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay=(7,</span> <span class="pre">31)</span></code>(effective from version 2.19.1-gamm-fu1): Delay period will be found by grid search in the value range of (7, 31) to minimize test score of learing. This is the default value from version 2.19.1-theta-fu1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay=None</span></code>: Delay period will be calculated with <code class="docutils literal notranslate"><span class="pre">Scenario.estimate_delay()</span></code> method. In this method, change point analysis will be done with one selected indicator (“Stringency_index” as default) and variable (“Confirmed” as default) to estimate delay period. This is the default value to version 2.19.1-theta.</p></li>
</ul>
<p>When we use <code class="docutils literal notranslate"><span class="pre">delay=None</span></code>, the indicator used to estimate delay period (“Stringency_index” as default) will be automatically removed from X dataset. If you have some indicators to be removed additionally, please use <code class="docutils literal notranslate"><span class="pre">removed_cols</span></code> argument (list of indicator names) of <code class="docutils literal notranslate"><span class="pre">Scenario.fit()</span></code>.</p>
<p>As an example, we only use OxCGRT indicators (except for “Stringency_index” because this is calculated with the other OxCGRT indicators).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create Forecast scenario (copy Main scenario and delete future phases)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Fitting with linear regression model (Elastic Net regression)</span>
<span class="n">fit_dict</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;RMSLE&quot;</span><span class="p">,</span>
    <span class="n">removed_cols</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Stringency_index&quot;</span><span class="p">,</span> <span class="s2">&quot;Tests&quot;</span><span class="p">,</span> <span class="s2">&quot;Tests_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Vaccinations&quot;</span><span class="p">,</span> <span class="s2">&quot;Vaccinated_once&quot;</span><span class="p">,</span> <span class="s2">&quot;Vaccinated_full&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Show determination coeefients of training/test dataset.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RMSLE: </span><span class="si">{</span><span class="n">fit_dict</span><span class="p">[</span><span class="s1">&#39;score_train&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> (train)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RMSLE: </span><span class="si">{</span><span class="n">fit_dict</span><span class="p">[</span><span class="s1">&#39;score_test&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> (test)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
RMSLE: 0.083 (train)
RMSLE: 0.061 (test)
</pre></div></div>
</div>
<p>Show the intercept and coefficient values of the regression model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Coefficient:&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">fit_dict</span><span class="p">[</span><span class="s2">&quot;intercept&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;Intercept&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Coefficient:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
#T_c0ed0_row0_col0{
            background-color:  #034871;
            color:  #f1f1f1;
        }#T_c0ed0_row0_col1,#T_c0ed0_row0_col6,#T_c0ed0_row0_col7,#T_c0ed0_row0_col8,#T_c0ed0_row0_col10,#T_c0ed0_row1_col1,#T_c0ed0_row1_col6,#T_c0ed0_row1_col7,#T_c0ed0_row1_col8,#T_c0ed0_row1_col10,#T_c0ed0_row2_col1,#T_c0ed0_row2_col6,#T_c0ed0_row2_col7,#T_c0ed0_row2_col8,#T_c0ed0_row2_col10,#T_c0ed0_row3_col1,#T_c0ed0_row3_col3,#T_c0ed0_row3_col4,#T_c0ed0_row3_col6,#T_c0ed0_row3_col7,#T_c0ed0_row3_col8,#T_c0ed0_row3_col9,#T_c0ed0_row3_col10{
            background-color:  #04649e;
            color:  #f1f1f1;
        }#T_c0ed0_row0_col2{
            background-color:  #62a2cb;
            color:  #000000;
        }#T_c0ed0_row0_col3{
            background-color:  #549cc7;
            color:  #000000;
        }#T_c0ed0_row0_col4{
            background-color:  #023858;
            color:  #f1f1f1;
        }#T_c0ed0_row0_col5{
            background-color:  #fff7fb;
            color:  #000000;
        }#T_c0ed0_row0_col9{
            background-color:  #056aa6;
            color:  #f1f1f1;
        }#T_c0ed0_row1_col0,#T_c0ed0_row1_col3,#T_c0ed0_row1_col4,#T_c0ed0_row1_col9{
            background-color:  #0567a1;
            color:  #f1f1f1;
        }#T_c0ed0_row1_col2,#T_c0ed0_row2_col3,#T_c0ed0_row2_col9{
            background-color:  #04649d;
            color:  #f1f1f1;
        }#T_c0ed0_row1_col5{
            background-color:  #04629a;
            color:  #f1f1f1;
        }#T_c0ed0_row2_col0{
            background-color:  #0569a5;
            color:  #f1f1f1;
        }#T_c0ed0_row2_col2{
            background-color:  #0566a0;
            color:  #f1f1f1;
        }#T_c0ed0_row2_col4,#T_c0ed0_row3_col5{
            background-color:  #05659f;
            color:  #f1f1f1;
        }#T_c0ed0_row2_col5{
            background-color:  #045e94;
            color:  #f1f1f1;
        }#T_c0ed0_row3_col0{
            background-color:  #0568a3;
            color:  #f1f1f1;
        }#T_c0ed0_row3_col2{
            background-color:  #045f95;
            color:  #f1f1f1;
        }</style><table id="T_c0ed0_" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >School_closing</th>        <th class="col_heading level0 col1" >Workplace_closing</th>        <th class="col_heading level0 col2" >Cancel_events</th>        <th class="col_heading level0 col3" >Gatherings_restrictions</th>        <th class="col_heading level0 col4" >Transport_closing</th>        <th class="col_heading level0 col5" >Stay_home_restrictions</th>        <th class="col_heading level0 col6" >Internal_movement_restrictions</th>        <th class="col_heading level0 col7" >International_movement_restrictions</th>        <th class="col_heading level0 col8" >Information_campaigns</th>        <th class="col_heading level0 col9" >Testing_policy</th>        <th class="col_heading level0 col10" >Contact_tracing</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_c0ed0_level0_row0" class="row_heading level0 row0" >theta</th>
                        <td id="T_c0ed0_row0_col0" class="data row0 col0" >0.153576</td>
                        <td id="T_c0ed0_row0_col1" class="data row0 col1" >0.000000</td>
                        <td id="T_c0ed0_row0_col2" class="data row0 col2" >-0.343851</td>
                        <td id="T_c0ed0_row0_col3" class="data row0 col3" >-0.311081</td>
                        <td id="T_c0ed0_row0_col4" class="data row0 col4" >0.228676</td>
                        <td id="T_c0ed0_row0_col5" class="data row0 col5" >-1.008772</td>
                        <td id="T_c0ed0_row0_col6" class="data row0 col6" >0.000000</td>
                        <td id="T_c0ed0_row0_col7" class="data row0 col7" >0.000000</td>
                        <td id="T_c0ed0_row0_col8" class="data row0 col8" >0.000000</td>
                        <td id="T_c0ed0_row0_col9" class="data row0 col9" >-0.040900</td>
                        <td id="T_c0ed0_row0_col10" class="data row0 col10" >0.000000</td>
            </tr>
            <tr>
                        <th id="T_c0ed0_level0_row1" class="row_heading level0 row1" >kappa</th>
                        <td id="T_c0ed0_row1_col0" class="data row1 col0" >-0.016735</td>
                        <td id="T_c0ed0_row1_col1" class="data row1 col1" >0.000000</td>
                        <td id="T_c0ed0_row1_col2" class="data row1 col2" >0.004022</td>
                        <td id="T_c0ed0_row1_col3" class="data row1 col3" >-0.016474</td>
                        <td id="T_c0ed0_row1_col4" class="data row1 col4" >-0.015886</td>
                        <td id="T_c0ed0_row1_col5" class="data row1 col5" >0.015181</td>
                        <td id="T_c0ed0_row1_col6" class="data row1 col6" >0.000000</td>
                        <td id="T_c0ed0_row1_col7" class="data row1 col7" >0.000000</td>
                        <td id="T_c0ed0_row1_col8" class="data row1 col8" >0.000000</td>
                        <td id="T_c0ed0_row1_col9" class="data row1 col9" >-0.015302</td>
                        <td id="T_c0ed0_row1_col10" class="data row1 col10" >0.000000</td>
            </tr>
            <tr>
                        <th id="T_c0ed0_level0_row2" class="row_heading level0 row2" >rho</th>
                        <td id="T_c0ed0_row2_col0" class="data row2 col0" >-0.034378</td>
                        <td id="T_c0ed0_row2_col1" class="data row2 col1" >0.000000</td>
                        <td id="T_c0ed0_row2_col2" class="data row2 col2" >-0.009481</td>
                        <td id="T_c0ed0_row2_col3" class="data row2 col3" >0.002215</td>
                        <td id="T_c0ed0_row2_col4" class="data row2 col4" >-0.006065</td>
                        <td id="T_c0ed0_row2_col5" class="data row2 col5" >0.041036</td>
                        <td id="T_c0ed0_row2_col6" class="data row2 col6" >0.000000</td>
                        <td id="T_c0ed0_row2_col7" class="data row2 col7" >0.000000</td>
                        <td id="T_c0ed0_row2_col8" class="data row2 col8" >0.000000</td>
                        <td id="T_c0ed0_row2_col9" class="data row2 col9" >0.006026</td>
                        <td id="T_c0ed0_row2_col10" class="data row2 col10" >0.000000</td>
            </tr>
            <tr>
                        <th id="T_c0ed0_level0_row3" class="row_heading level0 row3" >sigma</th>
                        <td id="T_c0ed0_row3_col0" class="data row3 col0" >-0.023970</td>
                        <td id="T_c0ed0_row3_col1" class="data row3 col1" >0.000000</td>
                        <td id="T_c0ed0_row3_col2" class="data row3 col2" >0.038354</td>
                        <td id="T_c0ed0_row3_col3" class="data row3 col3" >-0.003095</td>
                        <td id="T_c0ed0_row3_col4" class="data row3 col4" >-0.001974</td>
                        <td id="T_c0ed0_row3_col5" class="data row3 col5" >-0.005821</td>
                        <td id="T_c0ed0_row3_col6" class="data row3 col6" >0.000000</td>
                        <td id="T_c0ed0_row3_col7" class="data row3 col7" >0.000000</td>
                        <td id="T_c0ed0_row3_col8" class="data row3 col8" >0.000000</td>
                        <td id="T_c0ed0_row3_col9" class="data row3 col9" >-0.001891</td>
                        <td id="T_c0ed0_row3_col10" class="data row3 col10" >0.000000</td>
            </tr>
    </tbody></table></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.predict()</span></code> predicts the parameter values of future phases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Short-term prediction</span>
<span class="n">snl</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">)</span>
<span class="c1"># We can select list of days to predict optionally</span>
<span class="c1"># snl.predict(days=[1, 4], name=&quot;Forecast&quot;)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;covsirphy.analysis.scenario.Scenario at 0x7fa62a8692b0&gt;
</pre></div></div>
</div>
<p>Show summary of future phases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Future&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>alpha1 [-]</th>
      <th>1/alpha2 [day]</th>
      <th>1/beta [day]</th>
      <th>1/gamma [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
    <tr>
      <th>Scenario</th>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Main</th>
      <th>44th</th>
      <td>Future</td>
      <td>16May2021</td>
      <td>14Jun2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>45th</th>
      <td>Future</td>
      <td>15Jun2021</td>
      <td>31Jul2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Medicine</th>
      <th>44th</th>
      <td>Future</td>
      <td>16May2021</td>
      <td>14Jun2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.27</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.064694</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>15.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>45th</th>
      <td>Future</td>
      <td>15Jun2021</td>
      <td>31Jul2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000202</td>
      <td>0.001142</td>
      <td>0.083742</td>
      <td>0.077633</td>
      <td>1440</td>
      <td>0.0</td>
      <td>875.0</td>
      <td>11.0</td>
      <td>12.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>Forecast</th>
      <th>44th</th>
      <td>Future</td>
      <td>16May2021</td>
      <td>09Jun2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.62</td>
      <td>0.000217</td>
      <td>0.000727</td>
      <td>0.095480</td>
      <td>0.058050</td>
      <td>1440</td>
      <td>0.0</td>
      <td>1376.0</td>
      <td>10.0</td>
      <td>17.0</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Or, short-cut <code class="docutils literal notranslate"><span class="pre">.fit()</span></code> and <code class="docutils literal notranslate"><span class="pre">.predict()</span></code> with <code class="docutils literal notranslate"><span class="pre">Scenario.fit_predict()</span></code>. We can apply all arguments (of <code class="docutils literal notranslate"><span class="pre">.fit()</span></code> and <code class="docutils literal notranslate"><span class="pre">.predict()</span></code>) to <code class="docutils literal notranslate"><span class="pre">Scenario.fit_predict()</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Or, when you do not need &#39;fit_dict&#39;,</span>
<span class="c1"># snl.fit_predict(name=&quot;Forecast&quot;).summary(name=&quot;Forecast&quot;)</span>
</pre></div>
</div>
</div>
<p>To compare this scenario with the other scenarios, we should adjust the last end date with <code class="docutils literal notranslate"><span class="pre">Scenario.adjust_end()</span></code> because the last end date is differenct from the other scenarios at this time.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Adjust the last end dates</span>
<span class="n">snl</span><span class="o">.</span><span class="n">adjust_end</span><span class="p">()</span>
<span class="c1"># Show the last phases of all scenarios</span>
<span class="n">all_df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">all_df</span><span class="p">[</span><span class="s2">&quot;Scenario&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">last_end_date</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;End&quot;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> scenario: to </span><span class="si">{</span><span class="n">last_end_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Main scenario: to 31Jul2021
Medicine scenario: to 31Jul2021
Forecast scenario: to 31Jul2021
</pre></div></div>
</div>
<p>Simulate the number of cases of forecast scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="s2">&quot;CFR&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_97_0.png" src="_images/usage_quick_97_0.png" />
</div>
</div>
<p>Compare the number of cases of the all scenario with <code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code> and variable name.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_99_0.png" src="_images/usage_quick_99_0.png" />
</div>
</div>
<p>From version 2.19.1-eta, we can focus on the values in specified date range with the following arguments.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dates</span></code>: tuple of start date and end date</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">past_days</span></code> (integer): how many past days to use in calculation from today (<code class="docutils literal notranslate"><span class="pre">Scenario.today</span></code> property)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">phases</span></code> (list of str): phase names to use in calculation</p></li>
</ul>
<p>These arguments are effective with <code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code>, <code class="docutils literal notranslate"><span class="pre">Scenario.simulate()</span></code>, <code class="docutils literal notranslate"><span class="pre">Scenario.track()</span></code> and <code class="docutils literal notranslate"><span class="pre">Scenario.score()</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get the minimum value (from today to future) to set lower limit of y-axis</span>
<span class="n">lower_limit</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="p">(</span><span class="n">snl</span><span class="o">.</span><span class="n">today</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">show_figure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="c1"># From today to future (no limitation regarding end date)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="p">(</span><span class="n">snl</span><span class="o">.</span><span class="n">today</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="n">lower_limit</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_101_0.png" src="_images/usage_quick_101_0.png" />
</div>
</div>
<p>In the past 20 days. Reference date is today (<code class="docutils literal notranslate"><span class="pre">Scenario.today</span></code> property).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="n">past_days</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_103_0.png" src="_images/usage_quick_103_0.png" />
</div>
</div>
<p>In the selected phases. Here, we will show the 3rd, 4th and 5th phase.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;3rd&quot;</span><span class="p">,</span> <span class="s2">&quot;4th&quot;</span><span class="p">,</span> <span class="s2">&quot;5th&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_105_0.png" src="_images/usage_quick_105_0.png" />
</div>
</div>
</div>
<div class="section" id="Compare-the-scenarios">
<h2>Compare the scenarios<a class="headerlink" href="#Compare-the-scenarios" title="Permalink to this headline">¶</a></h2>
<p>We will compare the scenarios with representative values, reproduction number and parameter values. Currently, we can compare the scenarios with the following indexes.</p>
<ul class="simple">
<li><p>max(Infected): max value of Infected</p></li>
<li><p>argmax(Infected): the date when Infected shows max value</p></li>
<li><p>Infected on …: Infected on the end date of the last phase</p></li>
<li><p>Fatal on …: Fatal on the end date of the last phase</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>max(Infected)</th>
      <th>argmax(Infected)</th>
      <th>Confirmed on 31Jul2021</th>
      <th>Infected on 31Jul2021</th>
      <th>Fatal on 31Jul2021</th>
      <th>44th_Rt</th>
      <th>45th_Rt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Main</th>
      <td>288594</td>
      <td>31Jul2021</td>
      <td>1703851</td>
      <td>288594</td>
      <td>25732</td>
      <td>1.27</td>
      <td>1.27</td>
    </tr>
    <tr>
      <th>Medicine</th>
      <td>157427</td>
      <td>31Jul2021</td>
      <td>1487337</td>
      <td>157427</td>
      <td>22697</td>
      <td>1.27</td>
      <td>1.06</td>
    </tr>
    <tr>
      <th>Forecast</th>
      <td>1183951</td>
      <td>31Jul2021</td>
      <td>3641064</td>
      <td>1183951</td>
      <td>34972</td>
      <td>1.62</td>
      <td>1.62</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_108_0.png" src="_images/usage_quick_108_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_109_0.png" src="_images/usage_quick_109_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;rho&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_110_0.png" src="_images/usage_quick_110_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;sigma&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_111_0.png" src="_images/usage_quick_111_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_112_0.png" src="_images/usage_quick_112_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_113_0.png" src="_images/usage_quick_113_0.png" />
</div>
</div>
</div>
<div class="section" id="Change-rate-of-parameters-in-main-scenario">
<h2>Change rate of parameters in main scenario<a class="headerlink" href="#Change-rate-of-parameters-in-main-scenario" title="Permalink to this headline">¶</a></h2>
<p>History of each parameter will be shown. Values will be divided by the values in 0th phase.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history_rate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_115_0.png" src="_images/usage_quick_115_0.png" />
</div>
</div>
</div>
<div class="section" id="Retrospective-analysis">
<h2>Retrospective analysis<a class="headerlink" href="#Retrospective-analysis" title="Permalink to this headline">¶</a></h2>
<p>We can evaluate the impact of measures using past records. How many people were infected if the parameter values have not changed sinse 01Sep2020?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Perform retrospective analysis</span>
<span class="n">snl_retro</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">jhu_data</span><span class="p">,</span> <span class="n">population_data</span><span class="p">,</span> <span class="s2">&quot;Japan&quot;</span><span class="p">)</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">retrospective</span><span class="p">(</span>
    <span class="s2">&quot;01Jan2021&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="p">,</span> <span class="n">control</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;Retrospective&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         9th phase (21May2020 - 28May2020): finished  229 trials in 0 min  5 sec
         0th phase (06Feb2020 - 18Feb2020): finished  468 trials in 0 min 10 sec
         3rd phase (14Mar2020 - 24Mar2020): finished  406 trials in 0 min 10 sec
         6th phase (17Apr2020 - 01May2020): finished  415 trials in 0 min 10 sec
        10th phase (29May2020 - 05Jun2020): finished  231 trials in 0 min  5 sec
        11th phase (06Jun2020 - 13Jun2020): finished  224 trials in 0 min  5 sec
         4th phase (25Mar2020 - 02Apr2020): finished  409 trials in 0 min 10 sec
         1st phase (19Feb2020 - 05Mar2020): finished  427 trials in 0 min 10 sec
         7th phase (02May2020 - 11May2020): finished  439 trials in 0 min 10 sec
        12th phase (14Jun2020 - 28Jun2020): finished  411 trials in 0 min 10 sec
         5th phase (03Apr2020 - 16Apr2020): finished  378 trials in 0 min 10 sec
         2nd phase (06Mar2020 - 13Mar2020): finished  417 trials in 0 min 10 sec
         8th phase (12May2020 - 20May2020): finished  420 trials in 0 min 10 sec
        18th phase (21Aug2020 - 28Aug2020): finished  238 trials in 0 min  5 sec
        13th phase (29Jun2020 - 09Jul2020): finished  381 trials in 0 min 10 sec
        15th phase (22Jul2020 - 01Aug2020): finished  385 trials in 0 min 10 sec
        19th phase (29Aug2020 - 09Sep2020): finished  203 trials in 0 min  5 sec
        21st phase (19Sep2020 - 30Sep2020): finished  401 trials in 0 min 10 sec
        20th phase (10Sep2020 - 18Sep2020): finished  217 trials in 0 min  5 sec
        14th phase (10Jul2020 - 21Jul2020): finished  388 trials in 0 min 10 sec
        16th phase (02Aug2020 - 10Aug2020): finished  403 trials in 0 min 10 sec
        24th phase (24Oct2020 - 04Nov2020): finished  208 trials in 0 min  5 sec
        22nd phase (01Oct2020 - 13Oct2020): finished  398 trials in 0 min 10 sec
        25th phase (05Nov2020 - 13Nov2020): finished  204 trials in 0 min  5 sec
        27th phase (27Nov2020 - 09Dec2020): finished  409 trials in 0 min 10 sec
        17th phase (11Aug2020 - 20Aug2020): finished  387 trials in 0 min 10 sec
        23rd phase (14Oct2020 - 23Oct2020): finished  432 trials in 0 min 10 sec
        30th phase (30Dec2020 - 31Dec2020): finished  432 trials in 0 min  5 sec
        28th phase (10Dec2020 - 18Dec2020): finished  413 trials in 0 min 10 sec
        26th phase (14Nov2020 - 26Nov2020): finished  383 trials in 0 min 10 sec
        33rd phase (17Jan2021 - 24Jan2021): finished  452 trials in 0 min 10 sec
        36th phase (10Feb2021 - 17Feb2021): finished  241 trials in 0 min  5 sec
        29th phase (19Dec2020 - 29Dec2020): finished  451 trials in 0 min 10 sec
        34th phase (25Jan2021 - 01Feb2021): finished  275 trials in 0 min  5 sec
        31st phase (01Jan2021 - 07Jan2021): finished  469 trials in 0 min 10 sec
        37th phase (18Feb2021 - 02Mar2021): finished  260 trials in 0 min  5 sec
        35th phase (02Feb2021 - 09Feb2021): finished  293 trials in 0 min  5 sec
        38th phase (03Mar2021 - 12Mar2021): finished  289 trials in 0 min  5 sec
        32nd phase (08Jan2021 - 16Jan2021): finished  516 trials in 0 min 10 sec
        39th phase (13Mar2021 - 25Mar2021): finished  501 trials in 0 min 10 sec
        42nd phase (15Apr2021 - 23Apr2021): finished  506 trials in 0 min 10 sec
        43rd phase (24Apr2021 - 03May2021): finished  284 trials in 0 min  5 sec
        40th phase (26Mar2021 - 06Apr2021): finished  520 trials in 0 min 10 sec
        44th phase (04May2021 - 15May2021): finished  292 trials in 0 min  5 sec
        41st phase (07Apr2021 - 14Apr2021): finished  537 trials in 0 min 10 sec
Completed optimization. Total: 1 min 46 sec

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         4th phase (25Mar2020 - 02Apr2020): finished  486 trials in 0 min 10 sec
         6th phase (17Apr2020 - 01May2020): finished  486 trials in 0 min 10 sec
         2nd phase (06Mar2020 - 13Mar2020): finished  482 trials in 0 min 10 sec
         0th phase (06Feb2020 - 18Feb2020): finished  551 trials in 0 min 10 sec
         7th phase (02May2020 - 11May2020): finished  486 trials in 0 min 10 sec
         3rd phase (14Mar2020 - 24Mar2020): finished  482 trials in 0 min 10 sec
         5th phase (03Apr2020 - 16Apr2020): finished  482 trials in 0 min 10 sec
         1st phase (19Feb2020 - 05Mar2020): finished  478 trials in 0 min 10 sec
        10th phase (29May2020 - 05Jun2020): finished  271 trials in 0 min  5 sec
         8th phase (12May2020 - 20May2020): finished  490 trials in 0 min 10 sec
        12th phase (14Jun2020 - 28Jun2020): finished  490 trials in 0 min 10 sec
        11th phase (06Jun2020 - 13Jun2020): finished  262 trials in 0 min  5 sec
        14th phase (10Jul2020 - 21Jul2020): finished  485 trials in 0 min 10 sec
         9th phase (21May2020 - 28May2020): finished  270 trials in 0 min  5 sec
        13th phase (29Jun2020 - 09Jul2020): finished  488 trials in 0 min 10 sec
        18th phase (21Aug2020 - 28Aug2020): finished  268 trials in 0 min  5 sec
        15th phase (22Jul2020 - 01Aug2020): finished  484 trials in 0 min 10 sec
        16th phase (02Aug2020 - 10Aug2020): finished  489 trials in 0 min 10 sec
        20th phase (10Sep2020 - 18Sep2020): finished  270 trials in 0 min  5 sec
        19th phase (29Aug2020 - 09Sep2020): finished  270 trials in 0 min  5 sec
        24th phase (24Oct2020 - 04Nov2020): finished  268 trials in 0 min  5 sec
        17th phase (11Aug2020 - 20Aug2020): finished  488 trials in 0 min 10 sec
        22nd phase (01Oct2020 - 13Oct2020): finished  481 trials in 0 min 10 sec
        21st phase (19Sep2020 - 30Sep2020): finished  450 trials in 0 min 10 sec
        25th phase (05Nov2020 - 13Nov2020): finished  215 trials in 0 min  5 sec
        30th phase (30Dec2020 - 31Dec2020): finished  482 trials in 0 min  5 sec
        26th phase (14Nov2020 - 26Nov2020): finished  442 trials in 0 min 10 sec
        23rd phase (14Oct2020 - 23Oct2020): finished  433 trials in 0 min 10 sec
        28th phase (10Dec2020 - 18Dec2020): finished  493 trials in 0 min 10 sec
        27th phase (27Nov2020 - 09Dec2020): finished  500 trials in 0 min 10 sec
        31st phase (01Jan2021 - 15May2021): finished  494 trials in 0 min 10 sec
        29th phase (19Dec2020 - 29Dec2020): finished  509 trials in 0 min 10 sec
Completed optimization. Total: 1 min 15 sec
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the summary of estimation</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Start&quot;</span><span class="p">,</span> <span class="s2">&quot;End&quot;</span><span class="p">,</span> <span class="s2">&quot;ODE&quot;</span><span class="p">,</span> <span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="o">.</span><span class="n">PARAMETERS</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;RMSLE&quot;</span><span class="p">,</span> <span class="s2">&quot;Trials&quot;</span><span class="p">,</span> <span class="s2">&quot;Runtime&quot;</span><span class="p">]</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
    <tr>
      <th>Scenario</th>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Main</th>
      <th>0th</th>
      <td>06Feb2020</td>
      <td>18Feb2020</td>
      <td>SIR-F</td>
      <td>2.32</td>
      <td>0.027273</td>
      <td>0.000000</td>
      <td>0.066019</td>
      <td>0.027718</td>
      <td>0.142890</td>
      <td>468.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>19Feb2020</td>
      <td>05Mar2020</td>
      <td>SIR-F</td>
      <td>4.93</td>
      <td>0.007714</td>
      <td>0.001322</td>
      <td>0.136657</td>
      <td>0.026198</td>
      <td>0.170717</td>
      <td>427.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>06Mar2020</td>
      <td>13Mar2020</td>
      <td>SIR-F</td>
      <td>4.47</td>
      <td>0.001421</td>
      <td>0.003424</td>
      <td>0.126398</td>
      <td>0.024802</td>
      <td>0.096698</td>
      <td>417.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>14Mar2020</td>
      <td>24Mar2020</td>
      <td>SIR-F</td>
      <td>2.49</td>
      <td>0.010093</td>
      <td>0.002681</td>
      <td>0.063014</td>
      <td>0.022401</td>
      <td>0.029328</td>
      <td>406.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>25Mar2020</td>
      <td>02Apr2020</td>
      <td>SIR-F</td>
      <td>4.81</td>
      <td>0.000068</td>
      <td>0.001829</td>
      <td>0.117450</td>
      <td>0.022604</td>
      <td>0.036945</td>
      <td>409.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Retrospective</th>
      <th>27th</th>
      <td>27Nov2020</td>
      <td>09Dec2020</td>
      <td>SIR-F</td>
      <td>1.18</td>
      <td>0.000514</td>
      <td>0.001341</td>
      <td>0.106269</td>
      <td>0.088502</td>
      <td>0.012122</td>
      <td>500.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>28th</th>
      <td>10Dec2020</td>
      <td>18Dec2020</td>
      <td>SIR-F</td>
      <td>1.23</td>
      <td>0.000816</td>
      <td>0.001441</td>
      <td>0.109664</td>
      <td>0.087854</td>
      <td>0.013164</td>
      <td>493.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>29th</th>
      <td>19Dec2020</td>
      <td>29Dec2020</td>
      <td>SIR-F</td>
      <td>1.22</td>
      <td>0.000520</td>
      <td>0.001573</td>
      <td>0.100136</td>
      <td>0.080307</td>
      <td>0.012609</td>
      <td>509.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>30th</th>
      <td>30Dec2020</td>
      <td>31Dec2020</td>
      <td>SIR-F</td>
      <td>1.81</td>
      <td>0.000399</td>
      <td>0.001834</td>
      <td>0.104821</td>
      <td>0.056012</td>
      <td>0.000484</td>
      <td>482.0</td>
      <td>0 min  5 sec</td>
    </tr>
    <tr>
      <th>31st</th>
      <td>01Jan2021</td>
      <td>15May2021</td>
      <td>SIR-F</td>
      <td>0.98</td>
      <td>0.000004</td>
      <td>0.001776</td>
      <td>0.079470</td>
      <td>0.079527</td>
      <td>0.365066</td>
      <td>494.0</td>
      <td>0 min 10 sec</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 11 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># History of reproduction number</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl_retro</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_119_0.png" src="_images/usage_quick_119_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># History of Infected</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl_retro</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_120_0.png" src="_images/usage_quick_120_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the representative values</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>max(Infected)</th>
      <th>argmax(Infected)</th>
      <th>Confirmed on 15May2021</th>
      <th>Infected on 15May2021</th>
      <th>Fatal on 15May2021</th>
      <th>3rd_Rt</th>
      <th>5th_Rt</th>
      <th>7th_Rt</th>
      <th>10th_Rt</th>
      <th>14th_Rt</th>
      <th>...</th>
      <th>35th_Rt</th>
      <th>36th_Rt</th>
      <th>37th_Rt</th>
      <th>38th_Rt</th>
      <th>39th_Rt</th>
      <th>40th_Rt</th>
      <th>41st_Rt</th>
      <th>42nd_Rt</th>
      <th>43rd_Rt</th>
      <th>44th_Rt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Main</th>
      <td>76630</td>
      <td>15May2021</td>
      <td>677062</td>
      <td>76630</td>
      <td>11404</td>
      <td>2.49</td>
      <td>12.20</td>
      <td>0.26</td>
      <td>0.45</td>
      <td>2.30</td>
      <td>...</td>
      <td>0.51</td>
      <td>0.63</td>
      <td>0.7</td>
      <td>0.89</td>
      <td>1.12</td>
      <td>1.63</td>
      <td>1.51</td>
      <td>1.71</td>
      <td>1.39</td>
      <td>1.27</td>
    </tr>
    <tr>
      <th>Retrospective</th>
      <td>37147</td>
      <td>01Jan2021</td>
      <td>581942</td>
      <td>28051</td>
      <td>11254</td>
      <td>2.51</td>
      <td>12.31</td>
      <td>0.27</td>
      <td>0.46</td>
      <td>2.24</td>
      <td>...</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 28 columns</p>
</div></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="usage_dataset.html" class="btn btn-neutral float-right" title="Usage: datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="usage_quickest.html" class="btn btn-neutral float-left" title="Usage: quickest tour" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, CovsirPhy Development Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>